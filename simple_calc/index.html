<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/mathjs@11.11.1/lib/browser/math.min.js"></script>
    <script>
        function addLog(msg){
            var ul = document.getElementById("log");
            var li = document.createElement("li");  
            var msg_text = document.createTextNode(msg);

            li.appendChild(msg_text);
            ul.appendChild(li);
        

        }

        function calculate(){
            let expression = document.getElementById("expression").value;
            console.log(expression);
            try{
                // let answer = eval(expression);
                let answer = math.evaluate(expression);
                console.log(answer);
                addLog(expression + "=" + answer);
                document.getElementById("expression").value=answer;
            }catch(e){
                console.log(e);
                alert("Invalid Expression");
            }            
        }   

        function initialize_app(){
          calculate_btn = document.getElementById("calc-button");
          calculate_btn.addEventListener("click",calculate);
        }
    </script>
  </head>

  <body onload="initialize_app()">
    <h3 style="text-align: center;">Basic Calculator</h3>
    </br>
    <div class="container">
        <div class="row">
          <div class="col">
          </div>
          <div class="col" style="text-align: center;" >
            <input id="expression"></input>
            </br></br>
            <button type="button" class="btn btn-primary" id="calc-button">Calculate</button>
            <ul id="log" style="box-align: center; justify-content: center;"></ul>
          </div>
          <div class="col">
          </div>
        </div>
    </div>
    
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
  </body>

</html>
